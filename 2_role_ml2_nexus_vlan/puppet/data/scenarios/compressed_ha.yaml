#
# 3 node compressed ha
#
roles:
  build:
    classes:
      - coe::base
    class_groups:
      - test_file
      - build
  compressed_ha:
    classes:
      - coe::base
      - coe::network::interface
      - openstack-ha::load-balancer
      - cinder::setup_test_volume
      #- openstack::swift::proxy
      #- openstack::swift::storage-node
      - "nova::%{rpc_type}"
      - "%{network_service}"
      - "%{network_service}::plugins::%{network_plugin}"
      - "%{network_service}::server"
    class_groups:
      - glance_all
      - keystone_all
      - cinder_controller
      - nova_controller
      - horizon
      - ceilometer_controller
      - heat_all
      - "%{db_type}_database"
      - nova_compute
# For ML2, Uncomment this and comment above line
#      - nova_compute_ml2
      - cinder_volume
      - ceilometer_compute
      - provider_network_controller
# For ML2, Uncomment this and comment above line
#      - provider_network_controller_ml2
      - test_file
  compressed_ha_cephall:
    classes:
      - coe::base
      - coe::network::interface
      - openstack-ha::load-balancer
      - cinder::setup_test_volume
      #- openstack::swift::proxy
      #- openstack::swift::storage-node
      - "nova::%{rpc_type}"
      - "%{network_service}"
      - "%{network_service}::plugins::%{network_plugin}"
      - "%{network_service}::server"
    class_groups:
      - glance_all
      - keystone_all
      - cinder_controller
      - nova_controller
      - horizon
      - ceilometer_controller
      - heat_all
      - "%{db_type}_database"
      - nova_compute
      - cinder_volume
      - ceilometer_compute
      - provider_network_controller
# For ML2, Uncomment this and comment above line
#      - provider_network_controller_ml2
      - ceph_all
      - test_file
  compressed_ha_cephosd:
    classes:
      - coe::base
      - coe::network::interface
      - openstack-ha::load-balancer
      - cinder::setup_test_volume
      #- openstack::swift::proxy
      #- openstack::swift::storage-node
      - cephdeploy::osdwrapper
      - "nova::%{rpc_type}"
      - "%{network_service}"
      - "%{network_service}::plugins::%{network_plugin}"
      - "%{network_service}::server"
    class_groups:
      - glance_all
      - keystone_all
      - cinder_controller
      - nova_controller
      - horizon
      - ceilometer_controller
      - heat_all
      - "%{db_type}_database"
      - nova_compute
# For ML2, Uncomment this and comment above line
#      - nova_compute_ml2
      - cinder_volume
      - ceilometer_compute
      - provider_network_controller
# For ML2, Uncomment this and comment above line
#      - provider_network_controller_ml2
      - test_file
  compressed_ha_cephmon:
    classes:
      - coe::base
      - coe::network::interface
      - openstack-ha::load-balancer
      - cinder::setup_test_volume
      #- openstack::swift::proxy
      #- openstack::swift::storage-node
      - cephdeploy::mon
      - "nova::%{rpc_type}"
      - "%{network_service}"
      - "%{network_service}::plugins::%{network_plugin}"
      - "%{network_service}::server"
    class_groups:
      - glance_all
      - keystone_all
      - cinder_controller
      - nova_controller
      - horizon
      - ceilometer_controller
      - heat_all
      - "%{db_type}_database"
      - nova_compute
# For ML2, Uncomment this and comment above line
#      - nova_compute_ml2
      - cinder_volume
      - ceilometer_compute
      - provider_network_controller
# For ML2, Uncomment this and comment above line
#      - provider_network_controller_ml2
      - test_file
  compute:
    classes:
      - coe::base
      - cinder::setup_test_volume
    class_groups:
      - nova_compute
# For ML2, Uncomment this and comment above line
#      - nova_compute_ml2
      - cinder_volume
      - ceilometer_compute
  swift_storage:
    classes:
      - coe::base
      - openstack::swift::storage-node
